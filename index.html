<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>UJIAN KELISTRIKAN INJEKSI - SMKN 1 SUMARORONG</title>
    <style>
        :root {
            --primary: #1e293b;
            --accent: #dc2626; /* Merah Honda */
            --danger: #dc2626;
            --bg: #f8fafc;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--bg);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 10px;
        }

        .container {
            background: white;
            width: 100%;
            max-width: 550px;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            text-align: center;
            border-top: 8px solid var(--accent);
        }

        .warning-box {
            background: #fef2f2;
            border: 1px solid #fee2e2;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            color: var(--danger);
            font-size: 0.9rem;
            font-weight: bold;
        }

        .hidden { display: none; }

        input[type="text"] {
            width: 100%;
            padding: 15px;
            margin: 20px 0;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            box-sizing: border-box;
            font-size: 1.1rem;
        }

        .btn {
            background: var(--accent);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            width: 100%;
        }

        .option-btn {
            display: block;
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            background: #ffffff;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            cursor: pointer;
            text-align: left;
            font-size: 1rem;
            transition: 0.2s;
        }

        .option-btn:hover { border-color: var(--accent); background: #fef2f2; }

        .progress-bar {
            height: 100%;
            background: #e2e8f0;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
            height: 10px;
        }

        .progress-fill {
            height: 100%;
            background: var(--accent);
            width: 0%;
            transition: 0.4s;
        }

        .score-val { font-size: 4rem; font-weight: bold; color: var(--accent); margin: 10px 0; }
    </style>
</head>
<body>

<div class="container">
    <div id="start-screen">
        <h1 style="margin-bottom: 5px; font-size: 1.5rem;">KELISTRIKAN INJEKSI PGM-FI</h1>
        <p style="margin-top: 0; font-weight: bold; color: #64748b;">Materi: Honda CBR & Sonic 150R</p>
        <div class="warning-box">
            GREGORIUS, HENDRIK, THEOPILUS, RICHARD,<br>
            JAGA KEHADIRAN, JANGAN SAMPAI ANDA TINGGAL KELAS!
        </div>
        <p>Masukkan nama lengkap Anda untuk memulai:</p>
        <input type="text" id="student-name" placeholder="Nama Lengkap Siswa..." required>
        <button class="btn" onclick="startQuiz()">MULAI UJIAN</button>
    </div>

    <div id="quiz-screen" class="hidden">
        <div id="q-number" style="font-weight: bold; color: var(--accent);">Soal 1 / 20</div>
        <div class="progress-bar"><div id="progress" class="progress-fill"></div></div>
        <div class="question-box">
            <p id="q-text" style="font-weight: bold; font-size: 1.1rem; text-align: left; line-height: 1.4;"></p>
            <div id="options-container"></div>
        </div>
    </div>

    <div id="result-screen" class="hidden">
        <h2>HASIL UJIAN</h2>
        <p id="display-name" style="font-size: 1.2rem; margin-bottom: 0;"></p>
        <div class="score-val" id="final-score">0</div>
        <p id="status-text" style="font-weight: bold;"></p>
        <p style="color: #64748b; font-size: 0.8rem;">Data nilai BENYAMIN BATAU APP telah dikirim ke sistem.</p>
        <button class="btn" onclick="location.reload()">KEMBALI KE AWAL</button>
    </div>
</div>

<script>
    const quizData = [
        { q: "Komponen yang berfungsi sebagai 'otak' pada sistem injeksi CBR 150R adalah?", a: 2, o: ["Injektor", "Fuel Pump", "ECM/ECU", "BAS"] },
        { q: "Urutan aliran arus kelistrikan injeksi yang benar saat kunci kontak ON?", a: 0, o: ["Aki - Sekring - Kontak - ECM", "Aki - ECM - Injektor - Kontak", "Kontak - Aki - Fuel Pump - ECM", "ECM - Sensor - Aki - Kontak"] },
        { q: "Sensor yang mendeteksi kemiringan motor saat terjatuh (matic/sport Honda) adalah?", a: 3, o: ["CKP Sensor", "TP Sensor", "EOT Sensor", "Bank Angle Sensor (BAS)"] },
        { q: "Kedipan MIL 7 kali pada motor Honda menunjukkan masalah pada sensor?", a: 1, o: ["TP Sensor", "EOT/ECT Sensor", "IAT Sensor", "MAP Sensor"] },
        { q: "Berapa tegangan minimal aki agar sistem injeksi CBR/Sonic bekerja optimal?", a: 2, o: ["10.5 Volt", "11.0 Volt", "12.4 Volt", "14.5 Volt"] },
        { q: "Kedipan MIL 12 kali menunjukkan gangguan pada komponen?", a: 0, o: ["Injektor", "Fuel Pump", "Koil Pengapian", "Sensor CKP"] },
        { q: "Alat yang digunakan untuk membaca data sistem injeksi secara digital adalah?", a: 1, o: ["Multitester", "Diagnostic Tools (HIDS)", "Feeler Gauge", "Tachometer"] },
        { q: "Pada Sonic 150R, sensor ECT berfungsi mengukur suhu?", a: 2, o: ["Udara masuk", "Oli mesin", "Cairan pendingin (Radiator)", "Bahan bakar"] },
        { q: "Warna kabel massa (negatif) umum pada sistem kelistrikan Honda adalah?", a: 1, o: ["Merah", "Hijau", "Hitam", "Kuning"] },
        { q: "Fungsi dari Injektor pada rangkaian kelistrikan PGM-FI adalah?", a: 1, o: ["Memompa bensin", "Menyemprotkan bahan bakar", "Memercikkan api", "Mengatur udara"] },
        { q: "Kedipan MIL 52 kali berarti motor mengalami masalah pada?", a: 3, o: ["ECM", "Injektor", "TP Sensor", "Sensor CKP"] },
        { q: "Berapa tekanan standar Fuel Pump Honda (CBR/Sonic) dalam satuan psi?", a: 1, o: ["20 psi", "42 psi", "60 psi", "10 psi"] },
        { q: "Sensor TP (Throttle Position) terletak pada bagian?", a: 1, o: ["Kepala Silinder", "Throttle Body", "Bak Magnet", "Tangki Bensin"] },
        { q: "Kedipan MIL 1 panjang dan 2 pendek (12) berarti?", a: 0, o: ["Injektor bermasalah", "Sensor O2 rusak", "Fuel Pump macet", "Aki tekor"] },
        { q: "Koil pengapian menerima sinyal massa untuk memercikkan api dari?", a: 2, o: ["Aki langsung", "Kunci Kontak", "ECM", "Sensor BAS"] },
        { q: "Berapa tegangan referensi (Input) standar untuk sensor-sensor injeksi dari ECM?", a: 1, o: ["12 Volt", "5 Volt", "9 Volt", "1 Volt"] },
        { q: "Saat mengukur hambatan (Ohm) injektor, posisi multitester yang benar adalah?", a: 0, o: ["Paralel tanpa arus", "Seri dengan beban", "Dihubungkan ke aki", "Massa ke bodi"] },
        { q: "Sensor O2 pada motor Honda berfungsi untuk mendeteksi?", a: 2, o: ["Suhu mesin", "Posisi piston", "Kadar oksigen gas buang", "Kecepatan motor"] },
        { q: "Reset DLC (Data Link Connector) dilakukan dengan menjumper kabel warna?", a: 0, o: ["Coklat dan Hijau", "Merah dan Hitam", "Kuning dan Putih", "Biru dan Orange"] },
        { q: "Jika BAS (Bank Angle Sensor) aktif, komponen apa yang diputus oleh ECM?", a: 2, o: ["Lampu depan", "Klakson", "Fuel Pump & Pengapian", "Rem"] }
    ];

    let currentQuestion = 0;
    let score = 0;
    let studentName = "";

    function startQuiz() {
        studentName = document.getElementById('student-name').value;
        if (studentName.trim().length < 3) {
            alert("Harap masukkan nama lengkap!");
            return;
        }
        document.getElementById('start-screen').classList.add('hidden');
        document.getElementById('quiz-screen').classList.remove('hidden');
        showQuestion();
    }

    function showQuestion() {
        const q = quizData[currentQuestion];
        document.getElementById('q-number').innerText = `Soal ${currentQuestion + 1} / ${quizData.length}`;
        document.getElementById('q-text').innerText = q.q;
        const optionsDiv = document.getElementById('options-container');
        optionsDiv.innerHTML = "";
        
        q.o.forEach((opt, i) => {
            const btn = document.createElement('button');
            btn.className = "option-btn";
            btn.innerText = String.fromCharCode(65 + i) + ". " + opt;
            btn.onclick = () => nextQuestion(i);
            optionsDiv.appendChild(btn);
        });

        const progress = (currentQuestion / quizData.length) * 100;
        document.getElementById('progress').style.width = progress + "%";
    }

    function nextQuestion(selected) {
        if (selected === quizData[currentQuestion].a) {
            score += 5;
        }
        currentQuestion++;
        if (currentQuestion < quizData.length) {
            showQuestion();
        } else {
            showResult();
        }
    }

    function showResult() {
        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        document.getElementById('display-name').innerText = studentName;
        document.getElementById('final-score').innerText = score;

        if(score >= 75) {
            document.getElementById('status-text').innerText = "STATUS: LULUS KOMPETEN";
            document.getElementById('status-text').style.color = "green";
        } else {
            document.getElementById('status-text').innerText = "STATUS: BELUM KOMPETEN (REMEDIAL)";
            document.getElementById('status-text').style.color = "red";
        }

        const urlWebApp = "https://script.google.com/macros/s/AKfycbyjeUuWnxEIPKKNgy7G-gYcdob9OwLhnXGtiVKAugrqZRTb82ij2cWMQBuE1xBGA35t/exec";

        fetch(urlWebApp, {
            method: "POST",
            mode: "no-cors", 
            cache: "no-cache",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                nama: studentName,
                skor: score,
                materi: "Kelistrikan Injeksi"
            })
        })
        .then(() => console.log("Data terkirim."))
        .catch((error) => console.error("Gagal mengirim data:", error));
    }
</script>

</body>
</html>
